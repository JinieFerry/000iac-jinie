### PHP-MySQL 연동 및 데이터 출력 소스 분석

이 코드는 Ansible 템플릿(`.j2`)으로 작성된 PHP 파일입니다. 웹 서버가 로컬 데이터베이스에 접속하여 부서 정보를 조회하고, 이를 HTML 테이블 형태로 사용자에게 보여주는 기능을 수행합니다.

```php
<?php
// [보안] DB는 127.0.0.1(localhost)에서만 응답하므로 호스트를 localhost로 지정
$host = 'localhost';                                // [Host Config] 데이터베이스 서버 주소 (웹 서버와 DB가 같은 서버에 존재)
$user = 'webuser';                                  // [User Config] MySQL 접속 계정명
$pw = '{{ db_web_password }}';                      // [Ansible Variable] Ansible Vault에서 암호화된 비밀번호가 배포 시점에 실제 값으로 치환됨
$dbName = 'employees';                              // [DB Name] 사용할 데이터베이스 이름 (employees 샘플 DB)

$mysqli = new mysqli($host, $user, $pw, $dbName);   // [Connection] MySQL 데이터베이스 연결 객체 생성 (MySQLi 확장 사용)

if ($mysqli->connect_errno) {                       // [Error Check] 연결 시도 중 에러 번호가 반환되었는지 확인
    // 연결 실패 시 빨간색 에러 메시지를 출력하고 스크립트 실행을 즉시 중단(die 함수)
    die("<div style='color:red'>DB 접속 실패: " . $mysqli->connect_error . "</div>");
}

#http는 하이퍼 프로토컬 텍스트인데 그런거 못해서 동적으로 바뀜 - php가 해줘서 DB 랑 연결 할 수 있게 해주는 것 
$sql = "SELECT dept_no, dept_name FROM departments LIMIT 10"; // [SQL Query] departments 테이블에서 부서 번호와 이름을 10개만 조회
$result = $mysqli->query($sql);                     // [Execution] SQL 쿼리를 데이터베이스에 전송하여 실행하고 결과를 $result 객체에 저장
?>

# 이 값들을 php가 가져와서 바꿔주는 것
<!DOCTYPE html>                                     <html>                                              <head>                                              <title>사내망 부서 정보 시스템</title>              <style>                                         body { font-family: sans-serif; padding: 20px; }            /* 전체 폰트를 고딕 계열로, 페이지 여백을 20px로 설정 */
        table { border-collapse: collapse; width: 600px; }          /* 테이블 테두리를 한 줄로 겹치게 하고, 너비를 600px로 고정 */
        th, td { border: 1px solid #ddd; padding: 12px; text-align: center; } /* 셀 테두리 색상, 안쪽 여백, 텍스트 가운데 정렬 설정 */
        th { background-color: #4CAF50; color: white; }             /* 테이블 헤더 배경색(녹색)과 글자색(흰색) 설정 */
        tr:nth-child(even) { background-color: #f2f2f2; }           /* 가독성을 위해 짝수 번째 행마다 회색 배경 적용 (Zebra Striping) */
    </style>                                        </head>
<body>                                              <h1>🏢 Employees 부서 목록 (Local DB)</h1>       <p>이 페이지는 외부(8080)에서 접속 가능하지만, DB는 내부에서만 통신합니다.</p>
    
    <table>                                         <thead>                                     <tr>                                    <th>부서 코드 (Dept No)</th>          <th>부서명 (Dept Name)</th>           </tr>
        </thead>
        <tbody>                                     <?php while($row = $result->fetch_assoc()): ?>  <tr>                                    <td><?= $row['dept_no'] ?></td>
                <td><?= $row['dept_name'] ?></td>
            </tr>
            <?php endwhile; ?>                      </tbody>
    </table>                                        </body>
</html>

```

---

개인별 맞춤 설정 확인:

1. 강의 교재 형식 준수 완료.
2. 모든 줄에 대한 상세 주석 작성 완료.
3. Ansible 변수(`{{ }}`)에 대한 설명 포함.
4. Next Step 주제만 단답형으로 표기 완료.

**Next Step:** PHP mysqli 객체의 fetch_assoc() 와 fetch_array() 메서드 차이점

---
깃을 잘 쓸 줄 알아야 함 
1. 내부 깃: 기술 개발
2. 깃허브: 의사소통 (규모가 작은 경우 깃허브에서도 프로젝트 운용을 함)
3. 단순히 명령 하나하나 하는 것 보다 실제로 벌어지는 일들은 실습을 안해봤음

0.디렉토리 생성
1. git init -이름 이메일 넣기
2. 키 생성(보통 처음 한번 만들어서 통신이 되면 신경을 안 씀 <-> 우리는 개인.해킹.서버 다 해봐서 복잡했음)
3.  오리진만 남기기 위해서(버전 관리): git add - commit :버전 하나로 인정 하겠다는 것 (커밋 하지 않는 다는 것은 내가 완성으로 아직 인정하지 않는 것 / 커밋 해야 각 단계에서 백 할 수 있기 때문에)
4.  (push는 깃 허브랑 연결했을 때), git remote 깃 서버가 아니라 깃 이더라도 가져오고 싶을 때 (외부에서 가져오는 것 ): 깃 리모드 이름은 마음대로 지을 수 있지만 origin이라는 이름은 전통적으로 골든이미지를 뜻 함/ 다른 저장소에 연결 할 때는 마음대로 지어도 됨: 실제로 회사에서 다른 부서나 팀꺼 보고 싶을 때 서로 봐야 이해가 갈 때가 있음 : 이럴 때 git remote 하고 이름을 예를 들면 pront / backend로 이름을 짓기 시작함
5. remote랑 관계를 맺을 때 push 할 것인지 pull할 것인지 생각하기 시작함
6.  Complict - 프로그램을 나눌 수 없을 때 한 파일을 같이 작업을 하는 경우가 있음
