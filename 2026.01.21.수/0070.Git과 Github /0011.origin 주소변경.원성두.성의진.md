url 받는 것은 토큰, 키 받는 건 SSH로 하도록 정책이 바꼈음 (2026.01.20.화 Deploy keys 오류에 대한 팀장님 서치 결론)

## SSH 키 등록 후 비밀번호(Passphrase) 요청 해결 방법

GitHub에 SSH 공개키를 성공적으로 등록했음에도 불구하고 `git push` 시 비밀번호를 묻는 경우는 크게 두 가지 원인으로 압축됩니다. 하나는 SSH 키 생성 시 설정한 **Passphrase(암호)**를 묻는 것이고, 다른 하나는 여전히 **HTTPS 주소**를 사용하고 있어 GitHub 계정 비밀번호(또는 Token)를 요구하는 것입니다.

---

### 1. 원인 파악: 어떤 비밀번호를 묻는가?

터미널의 메시지를 확인하여 원인을 진단합니다.

* **"Enter passphrase for key..."**: SSH 키를 만들 때 입력한 암호를 묻는 것입니다. (정상적인 SSH 인증 과정)
* **"Username for '[https://github.com](https://github.com)'..."**: 현재 저장소 연결 방식이 SSH가 아닌 HTTPS로 설정되어 있는 상태입니다.

---

### 2. 해결책 A: SSH 에이전트에 키 등록 (Passphrase 생략)

SSH 키 생성 시 암호(Passphrase)를 입력했다면, 매번 입력하는 번거로움을 피하기 위해 `ssh-agent`에 키를 등록해야 합니다.

```bash
# 1. ssh-agent 실행
eval "$(ssh-agent -s)"

# 2. 개인키를 에이전트에 추가
ssh-add ~/.ssh/id_ed25519

```

*(참고: RSA 방식을 사용 중이라면 `~/.ssh/id_rsa`를 입력합니다.)*

---

### 3. 해결책 B: 원격 저장소 주소 재설정 (HTTPS → SSH)

가장 흔한 사례입니다. 로컬 저장소가 여전히 HTTPS 주소를 바라보고 있다면 SSH 키는 작동하지 않습니다.

```bash
# 1. 현재 주소 방식 확인
git remote -v

# 정책이 바꼈기 때문에 (기존은 url만 썼는데 이제 https 사용불가)
# https://github.com/putto4u/000iac 여기에서 github.com 후로 : 000iac 뒤에 .git이 붙음
# 2. SSH 주소로 변경 (사용자명과 저장소명을 본인 것으로 수정)
git remote set-url origin git@github.com:putto4u/000iac.git 

# 3. 다시 push 시도
# git push origin 자신이 올릴 branch 명
#  내 것만 올리는 것이 아니라 브랜치 전체를 올려서 전체 그림을 그리는 것이 깃허브
git push origin main #main도 브랜치임

```

---

### 4. 해결책 C: SSH 접속 테스트 및 강제 지정

SSH 설정 파일(`~/.ssh/config`)에 GitHub 접속 정보를 명시하여 인증 오류를 방지할 수 있습니다.

**`~/.ssh/config` 파일 작성 (없으면 생성):**

#ssh로 서로 접속할 때는 기본적으로 rsa를 제일 먼저 찾고, 그 후로 나온 것이 ED 255.19 (타원형  난수발생 암호화 공식에서 나온 이름) 방식, pem방식 (순서대로 찾음)
#이걸 맞추려면 여기서 ~/.ssh에서 config 파일을 만들어서 호스트 네임을 주는 것 (어떤 키로 접속할 지 미리 정의해두면 됨)

```text
Host github.com
  HostName github.com # 아이피 주소가 들어가도 됨
  User git
  IdentityFile ~/.ssh/id_ed25519

```

---

### 5. AWS 환경에서의 유료 서비스 및 비용 주의사항

* **AWS Systems Manager (SSM) Parameter Store (유료 가능)**: SSH 키 관리를 자동화하기 위해 키 경로를 Parameter Store에 저장하고 불러오는 방식을 사용할 수 있습니다. **표준 파라미터는 무료**이나, 10KB가 넘는 **고급 파라미터 사용 시 월 $0.05**가 부과됩니다.
* **EC2 Instance Connect Endpoint (무료)**: 퍼블릭 IP가 없는 프라이빗 서브넷의 EC2에서 GitHub에 접근할 때, NAT Gateway 대신 이 엔드포인트를 사용하면 비용을 절감할 수 있으나 설정이 복잡할 수 있습니다.
* **데이터 처리 비용**: SSH 인증 과정 자체의 데이터 양은 극히 적어 비용에 거의 영향을 주지 않지만, `git push`로 대용량 바이너리 파일을 전송할 경우 **Data Transfer Out** 비용이 발생함을 유의하십시오.

---

Next Step: SSH 에이전트 자동 실행 설정

SSH 키 등록 후에도 발생하는 인증 이슈의 핵심 원인을 정리했습니다. 현재 묻는 메시지가 "Passphrase"인지 "Username"인지에 따라 위 해결책을 적용해 보시기 바랍니다.
