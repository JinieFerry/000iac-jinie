https://github.com/putto4u/03.Ansible.IaC.InfraAuto/blob/main/0070.Git%EA%B3%BC%20Github/0031.Git%EC%84%9C%EB%B2%84%20vs%20Git%20Lab.md

기업에서 외부 클라우드 서비스인 GitHub.com을 사용하지 않고, 사내 네트워크 내부나 독립된 클라우드 환경에 **GitHub의 기능을 그대로 구현한 서버**를 구축하는 방법은 크게 두 가지로 나뉩니다.

현업에서 가장 많이 쓰이는 **GitHub Enterprise Server**와 오픈소스 기반의 대체제인 **GitLab** 구축 방법을 중심으로 정리해 드립니다.
---
####0
```
sudo apt update
sudo apt install ca-certificates tzdata perl
```

### 1. GitHub Enterprise Server (GHES) 구축

GitHub에서 제공하는 기업 전용 솔루션으로, 사용자가 익숙한 GitHub의 UI와 기능을 사내 서버(On-Premise)나 AWS VPC 내부에 그대로 설치할 수 있습니다.

* **특징:** GitHub Actions, Packages, 고급 보안 기능(Advanced Security) 등을 모두 포함합니다.
* **구축 방식:** 가상 머신 이미지(AMI, VHD, OVA 등) 형태로 제공되어 설치가 간편합니다.
* **과금 주의:** 이 서비스는 **상당히 고가의 유료 서비스**입니다. 사용자 수 기반의 라이선스 비용이 발생하며, 별도의 엔터프라이즈 계약이 필요합니다.

---

### 2. AWS EC2에 자체 Git 서버 구축 (GitLab 활용)

실무에서 "자체 서버 구축"이라고 하면 가장 많이 사용하는 방식입니다. 오픈소스인 **GitLab Community Edition(CE)**을 사용하면 GitHub과 거의 동일한 환경을 무료로 구축할 수 있습니다.

#### **[실습] Ubuntu 22.04 서버에 GitLab 설치하기**

1. **패키지 업데이트 및 필수 의존성 설치**
```bash
sudo apt update
sudo apt install -y curl openssh-server ca-certificates tzdata perl

```


2. **GitLab 저장소 추가 및 설치**
```bash
curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash
# EXTERNAL_URL에 접속할 서버 IP나 도메인을 입력합니다.
sudo EXTERNAL_URL="http://your-server-ip" apt install gitlab-ce

```


3. **초기 비밀번호 확인**
설치가 완료되면 다음 경로에서 루트 계정(`root`)의 임시 비밀번호를 확인할 수 있습니다.
```bash
sudo cat /etc/gitlab/initial_root_password

```



---

### 3. 서버 구축 시 고려해야 할 인프라 구성

자체 서버를 구축할 때는 단순히 소프트웨어 설치 외에 다음 항목들을 반드시 구성해야 실무에서 사용할 수 있습니다.

| 항목 | 상세 내용 | 비고 |
| --- | --- | --- |
| **Storage (EBS)** | 소스 코드가 저장될 저장 공간 확보 | **AWS 과금:** 용량(GB)당 월별 과금 |
| **Backup** | 서버 장애를 대비한 정기적인 Snapshot 설정 | S3 등에 백업 저장 시 비용 발생 |
| **Resource** | 최소 4 Core CPU, 4GB RAM 이상 권장 | GitLab은 메모리 점유율이 높음 |
| **Security Group** | 22(SSH), 80(HTTP), 443(HTTPS) 포트 개방 | AWS 보안 그룹 설정 필요 |

---

### 4. AWS 환경에서의 비용 및 서비스 안내

자체 서버를 구축하여 운영할 때 발생하는 주요 비용 항목입니다.

* **EC2 인스턴스 비용:** GitLab 등을 구동하기 위해서는 최소 `t3.medium` 이상의 사양이 필요하며, 인스턴스 가동 시간에 따라 **시간당 비용**이 발생합니다.
* **EBS 비용:** 저장하는 소스 코드 및 데이터 양에 따라 **월별 저장 비용**이 발생합니다.
* **유료 서비스 대안 (AWS CodeCommit):**
직접 서버를 구축하고 유지보수하는 것이 부담스럽다면 AWS의 매니지드 서비스인 **CodeCommit**을 사용할 수 있습니다.
* **과금:** 매월 5명의 활성 사용자까지 무료이며, 이후 추가 사용자당 $1가 부과됩니다. (매우 경제적이지만 GitHub만큼 UI가 편리하지는 않습니다.)



---

### 5. 요약: 어떤 것을 선택해야 할까?

1. **비용이 상관없고 GitHub과 100% 동일한 경험이 필요하다:** GitHub Enterprise Server
2. **무료로 강력한 CI/CD와 UI를 갖춘 서버를 직접 운영하고 싶다:** GitLab (추천)
3. **관리 리소스를 최소화하고 AWS 내부 서비스와 연동하고 싶다:** AWS CodeCommit

Next Step: GitLab CI/CD 파이프라인 구성 방법

---

* 이 문서는 깃허브 블로그나 기술 위키에 바로 활용할 수 있는 포맷으로 작성되었습니다.
* 서버 구축 후에는 반드시 HTTPS(SSL) 설정을 통해 소스 코드 전송 구간을 암호화하시기 바랍니다.
